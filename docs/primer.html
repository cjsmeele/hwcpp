<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>primer</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="hwcpp-primer">HwCpp primer</h1>
<!-- update table_of_contents( input ) -->
<p>bla bla bla <!-- update end --></p>
<h1 id="introduction">Introduction</h1>
<p>HwCpp is a library for writing micro-controller applications. This document provides a gentle introduction to using HwCpp. Basic C++ and hardware knowledge is assumed, but nothing too advanced.</p>
<h1 id="blink-a-led">Blink a led</h1>
<p>Blinking a LED is the “Hello world!” equivalent for micro-controllers, so let’s start with that.</p>
<!-- update example_path( "../demo/" ) -->
<!-- update example( input, "arduino-uno/blink-for-loop/main.cpp" ) -->
<div class="sourceCode" id="cb1"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb1-1" data-line-number="1">bla</a></code></pre></div>
<p>A typical HwCpp application is a single main.cpp file that includes and combines the parts of the application.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a></code></pre></div>
<p>The default way to specify which target is used is to put that information in the makefile, which passes it to the compiler as a command-line macro. The application just includes “hwcpp.hpp”, which includes the appropriate target-specific parts of HwCpp. Alternatively, the application can include the target-specific HwCpp file directly.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a></code></pre></div>
<p>All hwcpp stuff is inside the namespace hwcpp. This includes the target&lt;&gt; template, which is, through makefile/macro/hwcpp.hpp magic, the target micro-controller or board you are building your application for. By default, the target will use the highest clock speed possible, but in some cases you can specify a slower clock speed as template parameter. In this case we don’t, so the target will run full-speed.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">using</span> timing = target::timing;</a></code></pre></div>
<p>Most things in HwCpp are classes, not objects, so :: is used to select a thing within another thing. The line above selects the default timing service offered by our target as the timing we will use.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">using</span> led    = target::led;</a></code></pre></div>
<p>This blinky application is written for a target board that has an on board default LED. This is the case for the currently supported targets boards (Arduino Uno, Arduino Due, Blue Pill).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb6-1" data-line-number="1">   led::init();</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">   timing::init();</a></code></pre></div>
<p>Most ‘things’ in HwCpp are classes, not objects, but the play roughly the same role objects do in standard OO style applications. Objects are initialized by their constructors, HwCpp classes, which are called Compile Time Objects (cto’s), are initialized by calling their ::init() function. <em>All</em> cto’s must be initialialized in this way before they are used. Here we initialize the tow cto’s we will use: the timing and the LED.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb7-1" data-line-number="1">   <span class="cf">for</span>(;;){</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">      . . .</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">   }</a></code></pre></div>
<p>A micro-controller application has no Operating System to return to, hence it typically contains a never-ending loop. We can probably bike-shed forever about the best way to write such a loop, but I prefer for(;;) so that is what you will see.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb8-1" data-line-number="1">      led::set( <span class="dv">1</span> );</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">      . . .</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">      led::set( <span class="dv">0</span> );  </a></code></pre></div>
<p>The LED cto has a ::set() function that accepts a single bool value and makes its pin high or low according to the parameter.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb9-1" data-line-number="1">      timing::ms&lt; <span class="dv">200</span> &gt;::wait();</a></code></pre></div>
<p>The timing cto has a set of macro’s (ns&lt;&gt;, us&lt;&gt;, ms&lt;&gt;, s&lt;&gt;) that are used to specify a duration of the specified amount of time. Such a duration cto has a ::wait() function that will wait for the appropriate amount of time.</p>
<p>The point of a library is to make writing applications easier, so HwCpp has a blink&lt;&gt; function template that can be used to write a blinky. It requires the pin that must be blinked, and the duration of the on and off periods.</p>
<p>The HwCpp convention is that calling ::init() on cto’s is the duty of the code that uses the cto’s. Hence in this case it is the duty of the hwcpp::blink&lt;&gt; template to ::init() the led and duration, so we don’t have to write those lines. And because the timing is now mentioned only once the using… line for that can be omitted.</p>
<p><a href="python%20example(%20input,%20%22../demo/arduino-uno/blink-blink-1/main.cpp%22%20)"></a></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb10-6" data-line-number="6">   hwcpp::blink&lt; </a>
<a class="sourceLine" id="cb10-7" data-line-number="7">      target::led, </a>
<a class="sourceLine" id="cb10-8" data-line-number="8">      target::timing::ms&lt; <span class="dv">200</span> &gt; </a>
<a class="sourceLine" id="cb10-9" data-line-number="9">   &gt;();</a>
<a class="sourceLine" id="cb10-10" data-line-number="10">}</a></code></pre></div>
<p>The using… line for the target could be omitted too, but the target is mentioned twice, so in my taste omitting that line produces a blinky that is shorter, but slightly less pleasing to the eye.</p>
<!-- update example( input, "arduino-uno/blink-blink-2/main.cpp" ) -->
<div class="sourceCode" id="cb11"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb11-4" data-line-number="4">   hwcpp::blink&lt; </a>
<a class="sourceLine" id="cb11-5" data-line-number="5">      hwcpp::target&lt;&gt;::led, </a>
<a class="sourceLine" id="cb11-6" data-line-number="6">      hwcpp::target&lt;&gt;::timing::ms&lt; <span class="dv">200</span> &gt; </a>
<a class="sourceLine" id="cb11-7" data-line-number="7">   &gt;();</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">}</a></code></pre></div>
<h1 id="kitt">Kitt</h1>
<p>After blinking a single LED, the next step is to do something with a bunch of LEDs. The Kitt display (one LED back-and-forth, from the Knightrider series) is the standard example for this.</p>
<!-- update example( input, "arduino-uno/led-6-kitt/main.cpp" ) -->
<div class="sourceCode" id="cb12"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb12-7" data-line-number="7">   target::d8,</a>
<a class="sourceLine" id="cb12-8" data-line-number="8">   target::d9,</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">   target::d10,</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">   target::d11,</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">   target::d12,</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">   target::d<span class="dv">13</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13">&gt;;</a>
<a class="sourceLine" id="cb12-14" data-line-number="14"></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb12-16" data-line-number="16">   hwcpp::kitt&lt; pins, timing::ms&lt; <span class="dv">50</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">}</a></code></pre></div>
<p>The supported target boards don’t have a string of LEDs, so instead the pins that connect to the LEDs are specified. This application is for the Arduino Uno target, hence the Arduino pin names are used. (Alternatively, the pin names of the atMega328 chip could be used.) I used six pins are are conveniently located next to a ground pin.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">using</span> pins = hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb13-2" data-line-number="2">   target::d8,</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">   target::d9,</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">   target::d10,</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">   target::d11,</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">   target::d12,</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">   target::d<span class="dv">13</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">&gt;;</a></code></pre></div>
<p>The 6 pins are combined into a port_out. A port is an (ordered) bundle of pins, and ‘out’ indicates that the port can be used only as output.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb14-1" data-line-number="1">   hwcpp::kitt&lt; pins, timing::ms&lt; <span class="dv">50</span> &gt; &gt;();</a></code></pre></div>
<p>We could write the kitt functionality ourselves, but HwCpp has a function template for that, which requires a port and a duration. We pass those parameters, call the function, and kitt is alive.</p>
<h1 id="more-fun-with-leds">More fun with LEDs</h1>
<p>Blinking can be made more interesting by blinking more than just a single LED. A bunch of pins can be combined into a something that walks and quacks like a single (output) pin with the hwcpp::fanout&lt;&gt; template. To blink the six LEDs of the kitt example in usinson, all we need is to combine them into a single ‘pin’, and pass that pin to the blink function.</p>
<!-- update example( input, "arduino-uno/led-6-together/main.cpp" ) -->
<div class="sourceCode" id="cb15"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb15-7" data-line-number="7">   target::d8,</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">   target::d9,</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">   target::d10,</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">   target::d11,</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">   target::d12,</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">   target::d<span class="dv">13</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13">&gt;;</a>
<a class="sourceLine" id="cb15-14" data-line-number="14"></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb15-16" data-line-number="16">   hwcpp::blink&lt; pins, timing::ms&lt; <span class="dv">200</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">}</a></code></pre></div>
<p>The hwcpp::invert&lt;&gt; template can be used to create a pin that inverses the behavior of the pin it decorates. If we invert the first three pins this way before passing them to fanout, the LEDs alternate left-right.</p>
<!-- update example( input, "arduino-uno/led-6-left-right-1/main.cpp" ) -->
<div class="sourceCode" id="cb16"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb16-7" data-line-number="7">   hwcpp::invert&lt; target::d8 &gt;,</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">   hwcpp::invert&lt; target::d9 &gt;,</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">   hwcpp::invert&lt; target::d10 &gt;,</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">   target::d11,</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">   target::d12,</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">   target::d<span class="dv">13</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13">&gt;;</a>
<a class="sourceLine" id="cb16-14" data-line-number="14"></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb16-16" data-line-number="16">   hwcpp::blink&lt; pins, timing::ms&lt; <span class="dv">200</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">}</a></code></pre></div>
<p>A different (but totally equivalent) way to get this effect is to first combine the two groups of three LEDs, then invert one, and finally combine the two groups.</p>
<!-- update example( input, "arduino-uno/led-6-left-right-2/main.cpp" ) -->
<div class="sourceCode" id="cb17"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb17-7" data-line-number="7">   hwcpp::invert&lt; hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb17-8" data-line-number="8">      target::d8,</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">      target::d9,</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">      target::d10 &gt; &gt;,</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">   hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb17-12" data-line-number="12">      target::d11,</a>
<a class="sourceLine" id="cb17-13" data-line-number="13">      target::d12,</a>
<a class="sourceLine" id="cb17-14" data-line-number="14">      target::d13 &gt;</a>
<a class="sourceLine" id="cb17-15" data-line-number="15">&gt;;</a>
<a class="sourceLine" id="cb17-16" data-line-number="16"></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb17-18" data-line-number="18">   hwcpp::blink&lt; pins, timing::ms&lt; <span class="dv">200</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb17-19" data-line-number="19">}</a></code></pre></div>
<p>A simple variation alternates between the even and odd LEDs.</p>
<!-- update example( input, "arduino-uno/led-6-even-odd/main.cpp" ) -->
<div class="sourceCode" id="cb18"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb18-7" data-line-number="7">   hwcpp::invert&lt; target::d8 &gt;,</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">   target::d9,</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">   hwcpp::invert&lt; target::d10 &gt;,</a>
<a class="sourceLine" id="cb18-10" data-line-number="10">   target::d11,</a>
<a class="sourceLine" id="cb18-11" data-line-number="11">   hwcpp::invert&lt; target::d12 &gt;,</a>
<a class="sourceLine" id="cb18-12" data-line-number="12">   target::d<span class="dv">13</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13">&gt;;</a>
<a class="sourceLine" id="cb18-14" data-line-number="14"></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb18-16" data-line-number="16">   hwcpp::blink&lt; pins, timing::ms&lt; <span class="dv">200</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb18-17" data-line-number="17">}</a></code></pre></div>
<p>Another nice pattern is the inside-to-outside. The base for this is the walk&lt;&gt; function, which is like Kitt, but only forward.</p>
<!-- update example( input, "arduino-uno/led-6-walk-1/main.cpp" ) -->
<div class="sourceCode" id="cb19"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb19-7" data-line-number="7">   target::d8,</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">   target::d9,</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">   target::d10,</a>
<a class="sourceLine" id="cb19-10" data-line-number="10">   target::d11,</a>
<a class="sourceLine" id="cb19-11" data-line-number="11">   target::d12,</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">   target::d<span class="dv">13</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13">&gt;;</a>
<a class="sourceLine" id="cb19-14" data-line-number="14"></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb19-16" data-line-number="16">   hwcpp::walk&lt; pins, timing::ms&lt; <span class="dv">50</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb19-17" data-line-number="17">}</a></code></pre></div>
<p>If you don’t like the direction in which the pattern walks, you could of course change the order in which the pins are mentioned in the port_out constructor, but it is easier to use hwcpp::mirror&lt;&gt;.</p>
<!-- update example( input, "arduino-uno/led-6-walk-2/main.cpp" ) -->
<div class="sourceCode" id="cb20"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb20-5" data-line-number="5"></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb20-7" data-line-number="7">   target::d8,</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">   target::d9,</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">   target::d10,</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">   target::d11,</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">   target::d12,</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">   target::d<span class="dv">13</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13">&gt;;</a>
<a class="sourceLine" id="cb20-14" data-line-number="14"></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb20-16" data-line-number="16">   hwcpp::walk&lt; hwcpp::mirror&lt; pins &gt;, timing::ms&lt; <span class="dv">50</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">}</a></code></pre></div>
<p>To get inside-to-outside, we create two ports of three LEDs, one in the reverse order and the other in the normal order. These two ports are combined by fanout&lt;&gt; to get a single port. Running walk&lt;&gt; on this port creates the intended effect.</p>
<p>=&gt; fanout doesn’t work yet for ports</p>
<!-- update example( input, "arduino-uno/led-6-inside-out-1/main.cpp" ) -->
<div class="sourceCode" id="cb21"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb21-5" data-line-number="5"></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb21-7" data-line-number="7">   hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb21-8" data-line-number="8">      target::d10,</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">      target::d9,</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">      target::d8 &gt;,</a>
<a class="sourceLine" id="cb21-11" data-line-number="11">   hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb21-12" data-line-number="12">      target::d11,</a>
<a class="sourceLine" id="cb21-13" data-line-number="13">      target::d12,</a>
<a class="sourceLine" id="cb21-14" data-line-number="14">      target::d13 &gt;</a>
<a class="sourceLine" id="cb21-15" data-line-number="15">&gt;;</a>
<a class="sourceLine" id="cb21-16" data-line-number="16"></a>
<a class="sourceLine" id="cb21-17" data-line-number="17"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb21-18" data-line-number="18">   hwcpp::walk&lt; pins, timing::ms&lt; <span class="dv">200</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb21-19" data-line-number="19">}</a></code></pre></div>
<p>An alternative is to create the two sub-ports both in the standard pin order, but apply mirror&lt;&gt; to one of them before the two ports are combined by fanout&lt;&gt;.</p>
<!-- update example( input, "arduino-uno/led-6-inside-out-2/main.cpp" ) -->
<div class="sourceCode" id="cb22"><pre class="sourceCode c++"><code class="sourceCode cpp"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="pp">#include </span><span class="im">&quot;hwcpp.hpp&quot;</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="kw">using</span> target = hwcpp::target&lt;&gt;;</a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="kw">using</span> timing = target::waiting;</a>
<a class="sourceLine" id="cb22-5" data-line-number="5"></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="kw">using</span> pins = hwcpp::fanout&lt; </a>
<a class="sourceLine" id="cb22-7" data-line-number="7">   hwcpp::mirror&lt; hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb22-8" data-line-number="8">      target::d8,</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">      target::d9,</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">      target::d10 &gt; &gt;,</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">   hwcpp::port_out&lt; </a>
<a class="sourceLine" id="cb22-12" data-line-number="12">      target::d11,</a>
<a class="sourceLine" id="cb22-13" data-line-number="13">      target::d12,</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">      target::d13 &gt;</a>
<a class="sourceLine" id="cb22-15" data-line-number="15">&gt;;</a>
<a class="sourceLine" id="cb22-16" data-line-number="16"></a>
<a class="sourceLine" id="cb22-17" data-line-number="17"><span class="dt">int</span> main(){ </a>
<a class="sourceLine" id="cb22-18" data-line-number="18">   hwcpp::walk&lt; pins, timing::ms&lt; <span class="dv">200</span> &gt; &gt;();</a>
<a class="sourceLine" id="cb22-19" data-line-number="19">}</a></code></pre></div>
<ul>
<li>add dummy pins</li>
</ul>
</body>
</html>
